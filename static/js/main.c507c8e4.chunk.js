(window["webpackJsonpreact-chat-tutorial"]=window["webpackJsonpreact-chat-tutorial"]||[]).push([[0],{237:function(e,t,a){e.exports=a.p+"static/media/read.2da46147.svg"},238:function(e,t,a){e.exports=a.p+"static/media/unread.1456f013.svg"},240:function(e,t,a){e.exports=a.p+"static/media/wave.86c27fea.svg"},241:function(e,t,a){e.exports=a.p+"static/media/play.65f03140.svg"},242:function(e,t,a){e.exports=a.p+"static/media/pause.a61933e8.svg"},259:function(e,t,a){e.exports=a(539)},270:function(e,t,a){},311:function(e,t,a){},324:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){},512:function(e,t){},519:function(e,t,a){},535:function(e,t,a){},536:function(e,t,a){},537:function(e,t,a){},539:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),i=a.n(c),s=a(33),o=a(20),l=a(56),u=a(226),m=a(227),d=a(255),f=a(228),p=a(257),g=a(124),E=a(543),h=a(545),v=a(9),b=a(50),O=a(3),y=a.n(O),_=(a(270),function(e){return r.a.createElement("div",null,r.a.createElement(b.a,Object.assign({},e,{className:y()("button",e.className,{"button--large":"large"===e.size})})))}),S=(a(311),function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:y()("block",a)},t)}),j=a(540),w=a(234),I=a.n(w),N=a(125),D=function(e,t,a){return t[e]?a[e]?"error":"success":""},k=a(12),A=a(118),M=a.n(A),P=a(547),T=function(e){var t=e.text,a=e.type,n=void 0===a?"info":a,r=e.title,c=e.duration,i=void 0===c?3:c;return P.a[n]({message:r,description:t,duration:i})},x=function(e){if(!e)return!1;var t=e[0];return e.length&&"webm"===t.ext},C=(a(324),function(e){var t=e.user,a=e.text,n=e.date,c=e.isMe,i=e.read,s=e.attachments,o=e.isTyping,l=e.onRemoveMessage,u=e.setPreviewImage;return r.a.createElement("div",{className:y()("message",{"message--isme":c,"message--is-typing":o,"message--is-audio":x(s),"message--image":!x(s)&&s&&1===s.length&&!a})},r.a.createElement("div",{className:"message__content"},r.a.createElement(K,{isMe:c,isReaded:i}),r.a.createElement(j.a,{content:r.a.createElement("div",null,r.a.createElement(b.a,{onClick:l},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),trigger:"click"},r.a.createElement("div",{className:"message__icon-actions"},r.a.createElement(b.a,{type:"link",shape:"circle",icon:"ellipsis"}))),r.a.createElement("div",{className:"message__avatar"},r.a.createElement(le,{user:t})),r.a.createElement("div",null,r.a.createElement("div",{className:"message__info"},(a||o)&&r.a.createElement("div",{className:"message__bubble"},a&&r.a.createElement("p",{className:"message__text"},I()(a,/:(.+?):/g,function(e,t){return r.a.createElement(N.a,{key:t,emoji:e,set:"apple",size:16})})),o&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),!1),s&&r.a.createElement("div",{className:"message__attachments"},s.map(function(e){return function(e){return"webm"!==e.ext?r.a.createElement("div",{key:e._id,onClick:function(){return u(e.url)},className:"message__attachments-item"},r.a.createElement("div",{className:"message__attachments-item-overlay"},r.a.createElement(v.a,{type:"eye",style:{color:"white",fontSize:18}})),r.a.createElement("img",{src:e.url,alt:e.filename})):r.a.createElement(oe,{key:e._id,audioSrc:e.url})}(e)})),n&&r.a.createElement("span",{className:"message__date"},r.a.createElement(Z,{date:n}))))))});C.defaultProps={user:{}};var R=C,L=a(165),G=a(256),U=function(e){var t,a=e._id,n=e.isMe,c=e.currentDialogId,i=e.lastMessage,o=e.userId;return r.a.createElement(s.b,{to:"/dialog/".concat(a)},r.a.createElement("div",{className:y()("dialogs__item",{"dialogs__item--online":i.user.isOnline,"dialogs__item--selected":c===a})},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(le,{user:i.user})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,i.user.fullname),r.a.createElement("span",null,(t=new Date(i.createdAt),Object(G.a)(t)?Object(L.a)(t,"HH:mm"):Object(L.a)(t,"dd.MM.yyyy")))),r.a.createElement("div",{className:"dialogs__item-info-bottom"},r.a.createElement("p",null,function(e,t){var a="";return a=!e.text&&e.attachments.length?"\u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b":e.text,"".concat(e.user._id===t?"\u0412\u044b: ":"").concat(a)}(i,o)),n&&r.a.createElement(K,{isMe:n,isReaded:i.read})))))},V=a(1),F=a.n(V),H=a(254),z=a(236),B=a.n(z),W=function(e){var t=e.date;return Object(H.a)(t,{addSuffix:!0,locale:B.a})};W.propTypes={date:F.a.object};var Z=W,J=a(237),Y=a.n(J),X=a(238),q=a.n(X),K=function(e){var t=e.isMe,a=e.isReaded;return t&&(a?r.a.createElement("img",{className:"message__icon-readed",src:Y.a,alt:"Readed icon"}):r.a.createElement("img",{className:"message__icon-readed message__icon-readed--no",src:q.a,alt:"No readed icon"}))||null},$=a(239),Q=a.n($),ee=a(80),te=(a(414),function(e){var t=e.items,a=e.userId,n=e.onSearch,c=e.inputValue,i=e.currentDialogId;return r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"dialogs__search"},r.a.createElement(h.a.Search,{value:c,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u0440\u0435\u0434\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432",onChange:function(e){return n(e.target.value)}})),t.length?Q()(t,["createdAt"],["desc"]).map(function(e){return r.a.createElement(U,Object.assign({key:e._id,isMe:e.author._id===a,currentDialogId:i,userId:a},e))}):r.a.createElement(ee.a,{image:ee.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}))}),ae=a(240),ne=a.n(ae),re=a(241),ce=a.n(re),ie=a(242),se=a.n(ie),oe=function(e){var t=e.audioSrc,a=Object(n.useRef)(null),c=Object(n.useState)(!1),i=Object(k.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(0),u=Object(k.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)(0),p=Object(k.a)(f,2),g=p[0],E=p[1];Object(n.useEffect)(function(){a.current.volume="0.1",a.current.addEventListener("playing",function(){o(!0)},!1),a.current.addEventListener("ended",function(){o(!1),d(0),E(0)},!1),a.current.addEventListener("pause",function(){o(!1)},!1),a.current.addEventListener("timeupdate",function(){var e=a.current&&a.current.duration||0;E(a.current.currentTime),d(a.current.currentTime/e*100)})},[]);return r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:a,src:t,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:m+"40%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){s?a.current.pause():a.current.play()}},s?r.a.createElement("img",{src:se.a,alt:"Pause svg"}):r.a.createElement("img",{src:ce.a,alt:"Play svg"}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:ne.a,alt:"Wave svg"})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var t=Math.floor(e/60),a=(e%60).toFixed();return"".concat(t<10?"0":"").concat(t,":").concat(a<10?"0":"").concat(a)}(g))))},le=(a(415),function(e){var t=e.user;if(t.avatar)return r.a.createElement("img",{className:"avatar",src:t.avatar,alt:"Avatar ".concat(t.fullname)});var a=function(e){var t=e.substr(0,3).split("").map(function(e){return(t=e.charCodeAt(0))>255?255:t<0?0:t>255?255:t<0?0:t;var t}),a=Object(k.a)(t,3),n=a[0],r=a[1],c=a[2];return{color:M()({r:n,g:r,b:c}).lighten(10).saturate(10).toHexString(),colorLighten:M()({r:n,g:r,b:c}).lighten(30).saturate(30).toHexString()}}(t._id),n=a.color,c=a.colorLighten,i=t.fullname[0].toUpperCase();return r.a.createElement("div",{style:{background:"linear-gradient(135deg, ".concat(n," 0%, ").concat(c," 96.52%)")},className:"avatar avatar--symbol"},i)}),ue=(a(416),function(e){var t=e.online,a=e.fullname;return r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement("div",null),r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("b",{className:"chat__dialog-header-username"},a),r.a.createElement("div",{className:"chat__dialog-header-status"},r.a.createElement("span",{className:y()("status",{"status--online":t})},t?"\u043e\u043d\u043b\u0430\u043d":"\u043e\u0444\u043b\u0430\u0439\u043d"))),r.a.createElement(b.a,{type:"link",shape:"circle",icon:"ellipsis"}))}),me=a(243),de=(a(421),function(e){var t=e.emojiPickerVisible,a=e.value,c=e.setValue,i=e.toggleEmojiPicker,s=e.addEmoji,o=e.handleSendMessage,l=e.sendMessage,u=e.attachments,m=e.onSelectFiles,d=e.onRecord,f=e.isRecording,p=e.onHideRecording,g=e.isLoading,E=e.removeAttachment;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",null,r.a.createElement("div",{className:"chat-input__smile-btn"},t&&r.a.createElement("div",{className:"chat-input__emoji-picker"},r.a.createElement(N.b,{onSelect:function(e){return s(e)},set:"apple"})),r.a.createElement(b.a,{onClick:i,type:"link",shape:"circle",icon:"smile"})),f?r.a.createElement("div",{className:"chat-input__record-status"},r.a.createElement("i",{className:"chat-input__record-status-bubble"}),"Recording...",r.a.createElement(b.a,{onClick:p,type:"link",shape:"circle",icon:"close",className:"stop-recording"})):r.a.createElement(h.a,{onChange:function(e){return c(e.target.value)},value:a,onKeyUp:o,size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u2026"}),r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement(me.UploadField,{onFiles:m,containerProps:{className:"chat-input__actions-upload-btn"},uploadProps:{accept:".jpg, .jpeg, .png, .gif, .bmp",multiple:"multiple"},multiple:!0},r.a.createElement(b.a,{type:"link",shape:"circle",icon:"camera"})),g?r.a.createElement(b.a,{type:"link",shape:"circle",icon:"loading"}):f||a||u.length?r.a.createElement(b.a,{onClick:l,type:"link",shape:"circle",icon:"check-circle"}):r.a.createElement("div",{className:"chat-input__record-btn"},r.a.createElement(b.a,{onClick:d,type:"link",shape:"circle",icon:"audio"})))),u.length>0&&r.a.createElement("div",{className:"chat-input__attachments"},r.a.createElement(st,{attachments:u,removeAttachment:E}))))}),fe=a(541),pe=a(546),ge=(a(422),function(e){var t=e.isLoading,a=e.items,n=e.blockRef,c=e.user,i=e.onRemoveMessage,s=e.blockHeight,o=e.previewImage,l=e.setPreviewImage,u=e.partner,m=e.isTyping;return r.a.createElement("div",{className:"chat__dialog-messages",style:{height:"calc(100% - ".concat(s,"px)")}},r.a.createElement("div",{ref:n,className:y()("messages",{"messages--loading":t})},t&&!c?r.a.createElement(fe.a,{size:"large",tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439..."}):a&&!t?a.length>0?a.map(function(e){return r.a.createElement(R,Object.assign({key:e._id,isMe:c._id===e.user._id,onRemoveMessage:i.bind(void 0,e._id),setPreviewImage:l},e))}):r.a.createElement(ee.a,{description:"\u0414\u0438\u0430\u043b\u043e\u0433 \u043f\u0443\u0441\u0442"}):r.a.createElement(ee.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),m&&r.a.createElement(R,{isTyping:!0,user:u}),r.a.createElement(pe.a,{visible:!!o,onCancel:function(){return l(null)},footer:null},r.a.createElement("img",{style:{width:"100%"},src:o,alt:"Preview"}))))}),Ee=function(e){var t=e.name,a=e.placeholder,n=e.icon,c=e.type,i=e.handleChange,s=e.handleBlur,o=e.touched,l=e.errors,u=e.values;return r.a.createElement(E.a.Item,{validateStatus:D(t,o,l),help:o[t]?l[t]:"",hasFeedback:!0},r.a.createElement(h.a,{id:t,prefix:r.a.createElement(v.a,{type:n,style:{color:"rgba(0,0,0,.25)"}}),size:"large",placeholder:a,value:u[t],onChange:i,onBlur:s,type:c}))},he=a(544),ve=a(78),be=a(93),Oe=a.n(be);Oe.a.defaults.baseURL="https://react-nodejs-mongodb-chat.herokuapp.com/",Oe.a.defaults.headers.common.token=window.localStorage.token,window.axios=Oe.a;var ye=Oe.a,_e=function(){return ye.get("/dialogs")},Se=function(e){var t=e.partner,a=e.text;return ye.post("/dialogs",{partner:t,text:a})},je=function(e){return ye.get("/messages?dialog=".concat(e))},we=function(e){return ye.delete("/messages?id="+e)},Ie=function(e,t,a){return ye.post("/messages",{text:e,dialog_id:t,attachments:a})},Ne=function(e){return ye.post("/user/login",e)},De=function(e){return ye.post("/user/registration",e)},ke=function(e){return ye.get("/user/verify?hash="+e)},Ae=function(){return ye.get("/user/me")},Me=function(e){return ye.get("/user/find?query="+e)},Pe=function(e){var t=new FormData;return t.append("file",e),ye.post("/files",t,{headers:{"Content-Type":"multipart/form-data"}})},Te=a(250),xe=a.n(Te)()("https://react-nodejs-mongodb-chat.herokuapp.com/"),Ce={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},setCurrentDialogId:function(e){return function(t){xe.emit("DIALOGS:JOIN",e),t({type:"DIALOGS:SET_CURRENT_DIALOG_ID",payload:e})}},fetchDialogs:function(){return function(e){_e().then(function(t){var a=t.data;e(Ce.setDialogs(a))})}}},Re=Ce,Le={setMessages:function(e){return{type:"MESSAGES:SET_ITEMS",payload:e}},addMessage:function(e){return function(t,a){a().dialogs.currentDialogId===e.dialog._id&&t({type:"MESSAGES:ADD_MESSAGE",payload:e})}},fetchSendMessage:function(e){var t=e.text,a=e.dialogId,n=e.attachments;return function(e){return Ie(t,a,n)}},setIsLoading:function(e){return{type:"MESSAGES:SET_IS_LOADING",payload:e}},removeMessageById:function(e){return function(t){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?")&&we(e).then(function(){t({type:"MESSAGES:REMOVE_MESSAGE",payload:e})}).catch(function(){t(Le.setIsLoading(!1))})}},fetchMessages:function(e){return function(t){t(Le.setIsLoading(!0)),je(e).then(function(e){var a=e.data;t(Le.setMessages(a))}).catch(function(){t(Le.setIsLoading(!1))})}}},Ge=Le,Ue={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},setIsAuth:function(e){return{type:"USER:SET_IS_AUTH",payload:e}},fetchUserData:function(){return function(e){Ae().then(function(t){var a=t.data;e(Ue.setUserData(a))}).catch(function(t){console.log(t),403===t.response.status&&(e(Ue.setIsAuth(!1)),delete window.localStorage.token)})}},fetchUserLogin:function(e){return function(t){return Ne(e).then(function(e){var a=e.data,n=a.status,r=a.token;return"error"===n?T({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.",type:"error"}):(T({title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",text:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430.",type:"success"}),window.axios.defaults.headers.common.token=r,window.localStorage.token=r,t(Ue.fetchUserData()),t(Ue.setIsAuth(!0))),a}).catch(function(e){var t=e.response;403===t.status?T({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",type:"error"}):404===t.status&&T({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",type:"error"})})}},fetchUserRegister:function(e){return function(t){return De(e).then(function(e){return e.data})}}},Ve=Ue,Fe={setAttachments:function(e){return{type:"ATTACHMENTS:SET_ITEMS",payload:e}},removeAttachment:function(e){return{type:"ATTACHMENTS:REMOVE_ITEM",payload:e}}},He=Object(o.b)(function(e){var t=e.dialogs,a=e.user;return{items:t.items,user:a.data}},Re)(function(e){var t=e.items,a=e.user,c=e.currentDialogId,i=e.fetchDialogs,s=Object(n.useState)(""),o=Object(k.a)(s,2),l=o[0],u=o[1],m=Object(n.useState)(Object(ve.a)(t)),d=Object(k.a)(m,2),f=d[0],p=d[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";p(t.filter(function(t){return t.author.fullname.toLowerCase().indexOf(e.toLowerCase())>=0||t.partner.fullname.toLowerCase().indexOf(e.toLowerCase())>=0})),u(e)};return Object(n.useEffect)(function(){t.length&&g()},[t]),Object(n.useEffect)(function(){return i(),xe.on("SERVER:DIALOG_CREATED",i),xe.on("SERVER:NEW_MESSAGE",i),function(){xe.removeListener("SERVER:DIALOG_CREATED",i),xe.removeListener("SERVER:NEW_MESSAGE",i)}},[]),r.a.createElement(te,{userId:a&&a._id,items:f,onSearch:g,inputValue:l,currentDialogId:c})}),ze=a(251),Be=a.n(ze),We=Object(o.b)(function(e){var t=e.messages,a=e.dialogs,n=e.user,r=e.attachments;return{items:t.items,currentDialogId:a.currentDialogId,currentDialog:Be()(a.items,{_id:a.currentDialogId}),isLoading:t.isLoading,user:n.data,attachments:r.items}},Ge)(function(e){var t=e.currentDialog,a=e.currentDialogId,c=e.fetchMessages,i=e.addMessage,s=e.items,o=e.isLoading,l=e.user,u=e.removeMessageById,m=e.attachments,d=Object(n.useState)(135),f=Object(k.a)(d,2),p=f[0],g=f[1],E=Object(n.useState)(null),h=Object(k.a)(E,2),v=h[0],b=h[1],O=Object(n.useState)(!1),y=Object(k.a)(O,2),_=y[0],S=y[1],j=Object(n.useRef)(null),w=null,I=function(){S(!0),clearInterval(w),w=setTimeout(function(){S(!1)},500)};Object(n.useEffect)(function(){xe.on("DIALOGS:TYPING",I)},[]),Object(n.useEffect)(function(){m.length?g(245):g(135)},[m]);var N=function(e){i(e)};return Object(n.useEffect)(function(){return a&&c(a),xe.on("SERVER:NEW_MESSAGE",N),function(){return xe.removeListener("SERVER:NEW_MESSAGE",N)}},[a]),Object(n.useEffect)(function(){j.current.scrollTo(0,j.current.scrollHeight)},[s,_]),r.a.createElement(ge,{blockRef:j,items:s,isLoading:o,user:l,onRemoveMessage:u,blockHeight:p,setPreviewImage:b,previewImage:v,isTyping:_,partner:t?l._id!==t.partner._id?t.partner:t.author:null})}),Ze=a(30),Je=a(57),Ye=a.n(Je),Xe=a(123);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ke=Object(o.b)(function(e){var t=e.dialogs,a=e.attachments,n=e.user;return{currentDialogId:t.currentDialogId,attachments:a.items,user:n.data}},function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Ge,{},Fe))(function(e){var t=e.fetchSendMessage,a=e.currentDialogId,c=e.attachments,i=e.setAttachments,s=e.removeAttachment,o=e.user;window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia||window.navigator.webkitGetUserMedia;var l=Object(n.useState)(""),u=Object(k.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)(!1),p=Object(k.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)(!1),v=Object(k.a)(h,2),b=v[0],O=v[1],y=Object(n.useState)(null),_=Object(k.a)(y,2),S=_[0],j=_[1],w=Object(n.useState)(!1),I=Object(k.a)(w,2),N=I[0],D=I[1],A=function(){var e=Object(Xe.a)(Ye.a.mark(function e(t){var a,n,r;return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Ye.a.mark(function e(n){var r,c;return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[n],c=Math.round(1e3*Math.random()),a=[].concat(Object(ve.a)(a),[{uid:c,name:r.name,status:"uploading"}]),i(a),e.next=6,Pe(r).then(function(e){var t=e.data;a=a.map(function(e){return e.uid===c?{status:"done",uid:t.file._id,name:t.file.filename,url:t.file.url}:e})});case 6:case"end":return e.stop()}},e)}),r=0;case 3:if(!(r<t.length)){e.next=8;break}return e.delegateYield(n(r),"t0",5);case 5:r++,e.next=3;break;case 8:i(a);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=new MediaRecorder(e);j(t),t.start(),t.onstart=function(){O(!0)},t.onstop=function(){O(!1)},t.ondataavailable=function(e){var t=new File([e.data],"audio.webm");D(!0),Pe(t).then(function(e){var t=e.data;T(t.file._id).then(function(){D(!1)})})}},P=function(e){console.log("The following error occured: "+e)},T=function(e){return t({text:null,dialogId:a,attachments:[e]})};return a?r.a.createElement(de,{value:m,setValue:d,emojiPickerVisible:g,toggleEmojiPicker:function(){E(!g)},addEmoji:function(e){var t=e.colons;d("".concat(m," ").concat(t).trim())},handleSendMessage:function(e){xe.emit("DIALOGS:TYPING",{dialogId:a,user:o}),13===e.keyCode&&(m||c.length)&&(t({text:m,dialogId:a,attachments:c.map(function(e){return e.uid})}),d(""),i([]))},sendMessage:function(){b?S.stop():(m||c.length)&&(t({text:m,dialogId:a,attachments:c.map(function(e){return e.uid})}),d(""),i([]))},attachments:c,onSelectFiles:A,onRecord:function(){navigator.getUserMedia&&navigator.getUserMedia({audio:!0},M,P)},isRecording:b,onHideRecording:function(){O(!1)},isLoading:N,removeAttachment:s}):null}),$e=Object(o.b)(function(e){var t=e.dialogs,a=e.user;return{dialogs:t.items,currentDialogId:t.currentDialogId,user:a.data}})(function(e){var t=e.currentDialogId,a=e.user,n=e.dialogs;if(!n.length||!t)return null;var c=n.filter(function(e){return e._id===t})[0],i={};return i=c.author._id===a._id?c.partner:c.author,r.a.createElement(ue,{online:i.isOnline,fullname:i.fullname})}),Qe=function(){var e=Object(n.useState)(!1),t=Object(k.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),s=Object(k.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)(""),m=Object(k.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),g=Object(k.a)(p,2),E=g[0],h=g[1],v=Object(n.useState)(!1),b=Object(k.a)(v,2),O=b[0],y=b[1],_=Object(n.useState)(!1),S=Object(k.a)(_,2),j=S[0],w=S[1],I=function(){c(!1)};return r.a.createElement(at,{inputValue:o,visible:a,isLoading:O,onClose:I,onShow:function(){c(!0)},onSearch:function(e){y(!0),Me(e).then(function(e){var t=e.data;h(t),y(!1)}).catch(function(){y(!1)})},onChangeInput:function(e){l(e)},onSelectUser:function(e){w(e)},onModalOk:function(){Se({partner:j,text:d}).then(function(){I(),l(""),f("")}).catch(function(){y(!1)})},onChangeTextArea:function(e){f(e.target.value)},messageText:d,selectedUserId:j,users:E})},et=(a(519),he.a.Option),tt=h.a.TextArea,at=function(e){var t=e.visible,a=e.inputValue,n=e.messageText,c=e.selectedUserId,i=e.isLoading,s=e.users,o=e.onShow,l=e.onClose,u=e.onSearch,m=e.onChangeInput,d=e.onSelectUser,f=e.onChangeTextArea,p=e.onModalOk,g=s.map(function(e){return r.a.createElement(et,{key:e._id},e.fullname)});return r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement(v.a,{type:"team"}),r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432")),r.a.createElement(b.a,{onClick:o,type:"link",shape:"circle",icon:"form"})),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(He,null)),r.a.createElement(pe.a,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",visible:t,onCancel:l,footer:[r.a.createElement(b.a,{key:"back",onClick:l},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),r.a.createElement(b.a,{disabled:!n,key:"submit",type:"primary",loading:i,onClick:p},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")]},r.a.createElement(E.a,{className:"add-dialog-form"},r.a.createElement(E.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 E-Mail"},r.a.createElement(he.a,{value:a,onSearch:u,onChange:m,onSelect:d,notFoundContent:null,style:{width:"100%"},defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0443",showSearch:!0},g)),c&&r.a.createElement(E.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"},r.a.createElement(tt,{autosize:{minRows:3,maxRows:10},onChange:f,value:n})))))},nt=a(542);function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function it(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var st=function(e){var t=e.attachments,a=e.removeAttachment,c=Object(n.useState)({previewVisible:!1,previewImage:"",fileList:t}),i=Object(k.a)(c,2),s=i[0],o=i[1];Object(n.useEffect)(function(){o(ct({},s,{fileList:t}))},[t]);var l=function(){var e=Object(Xe.a)(Ye.a.mark(function e(t){return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,it(t.originFileObj);case 3:t.preview=e.sent;case 4:o(ct({},s,{previewImage:t.url||t.preview,previewVisible:!0}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"clearfix"},r.a.createElement(nt.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:s.fileList,onPreview:l,onChange:function(e){var t=e.fileList;return o(ct({},s,{fileList:t}))},onRemove:function(e){return a(e)}}),r.a.createElement(pe.a,{visible:s.previewVisible,footer:null,onCancel:function(){return o(ct({},s,{previewVisible:!1}))}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:s.previewImage})))},ot=function(e){var t=e.values,a=e.touched,n=e.errors,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,l=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(S,null,r.a.createElement(E.a,{onSubmit:o,className:"login-form"},r.a.createElement(E.a.Item,{validateStatus:D("email",a,n),help:a.email?n.email:"",hasFeedback:!0},r.a.createElement(h.a,{id:"email",prefix:r.a.createElement(v.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),size:"large",placeholder:"E-Mail",value:t.email,onChange:c,onBlur:i})),r.a.createElement(E.a.Item,{validateStatus:D("password",a,n),help:a.password?n.password:"",hasFeedback:!0},r.a.createElement(h.a,{id:"password",prefix:r.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),size:"large",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:t.password,onChange:c,onBlur:i})),r.a.createElement(E.a.Item,null,r.a.createElement(_,{htmlType:"submit",disabled:l,type:"primary",size:"large"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(s.b,{className:"auth__register-link",to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))},lt=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 E-Mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail"},password:function(e){e?t||/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(e)||(n.password="\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043b\u0451\u0433\u043a\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},password_2:function(e){t||e===a.password?e||(n.password_2="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"):n.password_2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"},fullname:function(e){t||e||(n.fullname="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e")}};Object.keys(a).forEach(function(e){return r[e]&&r[e](a[e])})},ut=Object(g.a)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return lt({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.props;(0,n.fetchUserLogin)(e).then(function(e){"success"===e.status&&n.history.push("/"),a(!1)}).catch(function(){a(!1)})},displayName:"LoginForm"})(ot),mt=Object(o.b)(null,Ve)(ut),dt=function(e){var t=e.values,a=e.touched,n=e.errors,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,l=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(S,null,r.a.createElement(E.a,{onSubmit:o,className:"login-form"},r.a.createElement(Ee,{name:"email",icon:"mail",placeholder:"E-Mail",handleChange:c,handleBlur:i,touched:a,errors:n,values:t}),r.a.createElement(Ee,{name:"fullname",icon:"user",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044f",handleChange:c,handleBlur:i,touched:a,errors:n,values:t}),r.a.createElement(Ee,{name:"password",icon:"lock",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",handleChange:c,handleBlur:i,touched:a,errors:n,values:t}),r.a.createElement(Ee,{name:"password_2",icon:"lock",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",handleChange:c,handleBlur:i,touched:a,errors:n,values:t}),r.a.createElement(E.a.Item,null,r.a.createElement(_,{htmlType:"submit",disabled:l,type:"primary",size:"large"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(s.b,{className:"auth__register-link",to:"/login"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))))},ft=Object(g.a)({mapPropsToValues:function(){return{email:"",fullname:"",password:"",password_2:""}},validate:function(e){var t={};return lt({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.props;(0,n.fetchUserRegister)(e).then(function(e){"success"===e.status&&(T({title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",text:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430.",type:"success"}),n.history.push("/register/verify")),a(!1)}).catch(function(){a(!1)})},displayName:"RegisterForm"})(dt),pt=Object(o.b)(null,Ve)(ft),gt=a(548),Et=function(e,t){var a=e.location,c=e.history,i=Object(n.useState)(!1),s=Object(k.a)(i,2),o=s[0],l=s[1],u=a.search.split("hash=")[1],m=function(e,t){return e?t?{status:"success",message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d!"}:{status:"loading",message:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}:{status:"success",message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 E-Mail."}}(u,o);return Object(n.useEffect)(function(){u&&ke(u).then(function(e){"success"===e.data.status&&l(!0)})},[]),r.a.createElement("div",null,r.a.createElement(S,null,"loading"===m.status?r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(fe.a,{size:"large",tip:m.message})):r.a.createElement(gt.a,{status:m.status,title:"success"===m.status?"\u0413\u043e\u0442\u043e\u0432\u043e!":"\u041e\u0448\u0438\u0431\u043a\u0430",subTitle:m.message,extra:"success"===m.status&&o&&r.a.createElement(b.a,{type:"primary",onClick:function(){return c.push("/login")}},"\u0412\u043e\u0439\u0442\u0438")})))},ht=(a(535),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(l.b,{exact:!0,path:["/","/login"],component:mt}),r.a.createElement(l.b,{exact:!0,path:"/register",component:pt}),r.a.createElement(l.b,{exact:!0,path:"/register/verify",component:Et})))}}]),t}(r.a.Component)),vt=a(42),bt=(a(536),Object(vt.d)(Object(o.b)(function(e){var t=e.user,a=e.dialogs;return{user:t.data,currentDialogId:a.currentDialogId}},Re),l.g)(function(e){var t=e.setCurrentDialogId,a=e.currentDialogId,c=e.user;return Object(n.useEffect)(function(){var a=e.location.pathname.split("/").pop();t(a)},[e.location.pathname]),r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement(Qe,null),c&&r.a.createElement("div",{className:"chat__dialog"},r.a.createElement($e,null),a?r.a.createElement(We,null):r.a.createElement("div",{className:"chat__dialog-messages"},r.a.createElement(ee.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"})),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(Ke,null)))))})),Ot=Object(o.b)(function(e){return{isAuth:e.user.isAuth}})(function(e){var t=e.isAuth;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:["/login","/register","/register/verify"],component:ht}),r.a.createElement(l.b,{path:"/",render:function(){return t?r.a.createElement(bt,null):r.a.createElement(l.a,{to:"/login"})}})))}),yt=a(253);function _t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function St(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_t(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_t(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var jt={items:[],currentDialogId:window.location.pathname.split("dialog/")[1],isLoading:!1};function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wt(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Nt={items:[],isLoading:!1};function Dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function kt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dt(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var At={data:null,token:window.localStorage.token,isAuth:!!window.localStorage.token};function Mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mt(a,!0).forEach(function(t){Object(Ze.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Tt={items:[]},xt=Object(vt.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"DIALOGS:SET_ITEMS":return St({},e,{items:n});case"DIALOGS:SET_CURRENT_DIALOG_ID":return St({},e,{currentDialogId:n});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MESSAGES:ADD_MESSAGE":return It({},e,{items:[].concat(Object(ve.a)(e.items),[n])});case"MESSAGES:SET_ITEMS":return It({},e,{items:n,isLoading:!1});case"MESSAGES:REMOVE_MESSAGE":return It({},e,{items:e.items.filter(function(e){return e._id!==n})});case"MESSAGES:SET_IS_LOADING":return It({},e,{isLoading:n});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER:SET_DATA":return kt({},e,{data:n,token:window.localStorage.token,isAuth:!0});case"USER:SET_IS_AUTH":return kt({},e,{isAuth:n});default:return e}},attachments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ATTACHMENTS:SET_ITEMS":return Pt({},e,{items:n});case"ATTACHMENTS:REMOVE_ITEM":return Pt({},e,{items:e.items.filter(function(e){return e.uid!==n.uid})});default:return e}}}),Ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||vt.d,Rt=[yt.a],Lt=Ct(vt.a.apply(void 0,Rt)),Gt=Object(vt.e)(xt,Lt);a(537),a(538);Gt.dispatch(Ve.fetchUserData()),i.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:Gt},r.a.createElement(Ot,null))),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.c507c8e4.chunk.js.map